#!/usr/bin/env node
var program = require('commander');
var helpers = require('../helpers');
var table = require('cli-table');
var dateFormat = require('dateFormat');

program
  .option('-c, --config <path>', 'set config path [./cloud.json]')
  .parse(process.argv);

var config = program.config;

helpers.init(config, function(err, cloud) {
  cloud.getFlavors(function(err, regions) {
    if (err) {
      console.log(err);
      process.exit(1);
    }
    var tbl = new table({
      head: ['ID', 'NAME', 'RAM', 'DISK', 'VCPUS'],
      colWidths: [10, 30, 10, 10, 10]
    });
    for (var reg in regions) {
      console.log('================================');
      console.log('Region: '+reg);
      var flavors = regions[reg];
      for (var iter in flavors) {
        var flv = flavors[iter];
        var data = [flv.id, flv.name, flv.ram, flv.disk, flv.vcpus];
        tbl.push(data);
      }
      console.log(tbl.toString());
    }
  });
});